<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FSR Viagens | Desconto VIP na 1¬™ Viagem e Consultoria Especializada</title>
    
    <link rel="stylesheet" href="/static/style.css"> 
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <meta name="description" content="Consultoria de viagens especializada desde 2004. Escolha seu pacote FSR e garanta um Desconto VIP de 5% OFF.">

    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        /* CSS B√ÅSICO PARA OS NOVOS COMPONENTES (Ajuste isso no seu style.css) */
        .vitrine-pacotes {
            margin-top: 25px;
            padding: 20px;
            background: #f8f8f8;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .vitrine-pacotes h2 {
            text-align: center;
            color: #007bff; /* Azul prim√°rio */
            margin-bottom: 20px;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }
        .pacotes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }
        .pacote-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
        }
        .pacote-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        .pacote-card img {
            width: 100%;
            height: 180px;
            object-fit: cover;
        }
        .pacote-content {
            padding: 15px;
            flex-grow: 1;
        }
        .pacote-content h3 {
            color: #343a40;
            margin-top: 0;
            font-size: 1.2em;
        }
        .pacote-content p {
            font-size: 0.9em;
            color: #6c757d;
            margin-bottom: 10px;
            min-height: 40px; 
        }
        .pacote-content .saida {
            font-weight: bold;
            color: #28a745; 
            display: block;
            margin-bottom: 10px;
        }
        .pacote-card .btn-selecionar {
            background-color: #ffc107; 
            color: #212529;
            border: none;
            padding: 10px 15px;
            width: 100%;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.2s;
            margin-top: auto; 
            border-radius: 0 0 8px 8px;
        }
        .pacote-card .btn-selecionar:hover {
            background-color: #e0a800;
        }
        /* Estilo para a op√ß√£o de Consultoria no card */
        .card-consultoria {
            background: #007bff;
            color: white;
            border: 2px dashed #ffc107;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .card-consultoria h3 {
            color: white;
            font-size: 1.4em;
        }
        .card-consultoria p {
            color: #cce5ff;
            font-size: 1em;
            margin-bottom: 20px;
        }
        .card-consultoria .btn-selecionar {
            background-color: #ffc107; 
        }
    </style>
</head>
<body>
    <div id="root">
    </div>

    <script type="text/babel">
        // Endpoints e Constantes
        const API_PAC_URL = '/api/pacotes'; 
        const WHATSAPP_NUMBER = '5561983163710';
        const API_LEAD_URL = '/capturar_lead';
        const TELEFONE_REGEX = /^\d{10,11}/; 
        
        // Gatilho de Compra / Desconto VIP
        const PROSPECT_DISCOUNT = '5%';

        // --- DADOS PARA OS CARDS E FALLBACK (Incluindo mais op√ß√µes e Imagens) ---
        // Rotas de Imagens de uso livre (Placeholder - Use imagens do seu servidor)
        const getImageUrl = (key) => {
            const IMAGENS = {
                'Fortaleza': 'https://images.unsplash.com/photo-1549419163-912a52af5f5d?w=400&h=200&fit=crop', // Praia
                'Salvador': 'https://images.unsplash.com/photo-1590494801198-fa3274291e2b?w=400&h=200&fit=crop', // Pelourinho
                'Egito': 'https://images.unsplash.com/photo-1523451551525-2c8c5026c483?w=400&h=200&fit=crop', // Pir√¢mides
                'Tail√¢ndia': 'https://images.unsplash.com/photo-1541888946950-891005b6370f?w=400&h=200&fit=crop', // Templo/Lanterna
                'Porto de Galinhas': 'https://images.unsplash.com/photo-1628178877526-9f7a77d7008d?w=400&h=200&fit=crop', // Piscinas Naturais
                'Turquia': 'https://images.unsplash.com/photo-1582035900554-75af47f2010c?w=400&h=200&fit=crop', // Capad√≥cia
                'Customizado': 'https://images.unsplash.com/photo-1454486518536-54a86b3a0e63?w=400&h=200&fit=crop', // Mapa/Globo
                'Len√ß√≥is Maranhenses': 'https://images.unsplash.com/photo-1616880004500-2d8329606822?w=400&h=200&fit=crop', // Dunas e Lagoas
                'Gramado': 'https://images.unsplash.com/photo-1628373199839-a79669528d26?w=400&h=200&fit=crop', // Serra Ga√∫cha
            };
            return IMAGENS[key] || IMAGENS['Customizado']; 
        };

        const DADOS_FALLBACK = [
            // Pacotes Nacionais
            { id: 101, nome: "Porto de Galinhas e Maragogi", saida: "Londrina e Maring√°", tipo: "NACIONAL", desc: "üê† O melhor do Nordeste! Mergulhe nas piscinas naturais e desfrute do famoso 'Caribe Brasileiro'.", imgKey: 'Porto de Galinhas' },
            { id: 102, nome: "Salvador com Morro de S√£o Paulo", saida: "Variadas (Bloqueios Nacionais)", tipo: "NACIONAL", desc: "üèùÔ∏è Combina√ß√£o imbat√≠vel de cidade hist√≥rica e ilha sem carros. Descanse e explore Morro de S√£o Paulo.", imgKey: 'Salvador' },
            { id: 103, nome: "Len√ß√≥is Maranhenses | S√£o Lu√≠s e Barreirinhas", saida: "Bras√≠lia (Bloqueios)", tipo: "NACIONAL", desc: "üíß Descubra a beleza surreal das lagoas entre dunas. Um ecoturismo inesquec√≠vel.", imgKey: 'Len√ß√≥is Maranhenses' },
            { id: 104, nome: "Gramado | Natal Luz e Roteiro de Vinhos", saida: "S√£o Paulo, Porto Alegre e Curitiba", tipo: "NACIONAL", desc: "üç∑ Experi√™ncia completa com o Natal Luz e tours pelas vin√≠colas da Serra Ga√∫cha.", imgKey: 'Gramado' },
            
            // Pacotes Internacionais
            { id: 105, nome: "R√©veillon na Tail√¢ndia com Festival das Lanternas", saida: "Variadas (Bloqueios Internacionais)", tipo: "INTERNACIONAL", desc: "üéá Celebre a virada com o m√°gico Festival das Lanternas. Praias e templos milenares.", imgKey: 'Tail√¢ndia' },
            { id: 106, nome: "Egito 2X1 | Pacote 08 dias e 07 noites", saida: "S√£o Paulo, Rio de Janeiro (Bloqueios)", tipo: "INTERNACIONAL", desc: "üê™ Pacote 2X1, jornada pela hist√≥ria milenar, pir√¢mides e cruzeiro pelo Nilo. √önico!", imgKey: 'Egito' },
            { id: 107, nome: "Grand Turquia Extra 2026 Essencial", saida: "Variadas", tipo: "INTERNACIONAL", desc: "üáπüá∑ Pacote pela Turquia, visitando Istambul, Capad√≥cia e Pamukkale. Cultura e paisagens.", imgKey: 'Turquia' },
            
            // Op√ß√£o de Personaliza√ß√£o (Sempre no fim)
            { id: 999, nome: "Consultoria Personalizada / Outro Destino", saida: "Seu aeroporto de prefer√™ncia", tipo: "CONSULTORIA", desc: "‚ú® Destino Sob Medida: Crie seu roteiro do zero e garanta seu Desconto VIP na primeira compra.", imgKey: 'Customizado' }
        ];
        // -----------------------------------------------------

        // Mapeamento de Descritivos (Para enriquecer a mensagem do WhatsApp) - Mantidos
        const DESCRITIVOS_ROTEIROS = {
            "Fortaleza com Praia da Lagoinha": "‚òÄÔ∏è Roteiro perfeito para quem ama sol, mar e aventura. Inclui a beleza r√∫stica da Praia da Lagoinha e o agito da capital cearense.",
            "Salvador com Morro de S√£o Paulo": "üèùÔ∏è Uma combina√ß√£o imbat√≠vel de cidade hist√≥rica e ilha sem carros. Descanse e explore as famosas praias de Morro de S√£o Paulo.",
            "Egito 2X1 | Pacote 08 dias e 07 noites": "üê™ Pacote 2X1, uma jornada pela hist√≥ria milenar, pir√¢mides e cruzeiro pelo Nilo. Oportunidade √∫nica para ir al√©m do comum!",
            "R√©veillon na Tail√¢ndia com Festival das Lanternas": "üéá Celebre a virada do ano com o m√°gico Festival das Lanternas (Yi Peng). Praias paradis√≠acas e templos milenares esperam por voc√™.",
            "Len√ß√≥is Maranhenses | S√£o Lu√≠s e Barreirinhas": "üíß Descubra a beleza surreal das lagoas entre dunas. Um ecoturismo inesquec√≠vel combinando S√£o Lu√≠s e Barreirinhas.",
            "Porto de Galinhas e Maragogi": "üê† O melhor do Nordeste! Mergulhe nas piscinas naturais e desfrute do famoso 'Caribe Brasileiro'.",
            "R√©veillon 2026 - Cost√£o do Santinho Resort": "üéâ R√©veillon All Inclusive em um dos resorts mais desejados do Brasil. Garanta sua vaga com as melhores condi√ß√µes.",
            "Grand Turquia Extra 2026 Essencial": "üáπüá∑ Pacote Essencial pela Turquia, visitando Istambul, Capad√≥cia e Pamukkale. Cultura, hist√≥ria e paisagens inesquec√≠veis.",
            "Consultoria Personalizada / Outro Destino": "‚ú® Destino Sob Medida: Voc√™ tem em mente um roteiro que n√£o encontrou na lista? Nossa consultoria criar√° o pacote perfeito para voc√™!",
        };

        // Fun√ß√£o utilit√°ria para obter a data m√≠nima permitida (hoje + 4 dias)
        const getMinDate = () => {
            const date = new Date();
            date.setDate(date.getDate() + 4); 
            return date.toISOString().split('T')[0];
        };
        
        // Fun√ß√£o para obter o descritivo a partir do nome do pacote
        const obterDescritivoRoteiro = (pacoteNomeCompleto) => {
            if (pacoteNomeCompleto.includes("Consultoria Personalizada")) {
                return DESCRITIVOS_ROTEIROS["Consultoria Personalizada / Outro Destino"];
            }
            
            const nomeBase = pacoteNomeCompleto.split('|')[0].trim(); 
            
            if (DESCRITIVOS_ROTEIROS[nomeBase]) {
                return DESCRITIVOS_ROTEIROS[nomeBase];
            }
            
            const pacoteFallback = DADOS_FALLBACK.find(p => p.nome.includes(nomeBase));
            if (pacoteFallback && pacoteFallback.desc) {
                return pacoteFallback.desc;
            }
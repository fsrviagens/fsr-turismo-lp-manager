<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FSR Viagens | Consultoria e Pacotes Exclusivos</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body { font-family: 'Arial', sans-serif; background-color: #f4f4f4; color: #333; margin: 0; padding: 0; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .form-container { max-width: 900px; }
        
        /* Header & Hero */
        .header__content { text-align: center; padding: 20px 0; }
        .logo__image { max-width: 250px; height: auto; margin-bottom: 10px; }
        .hero__headline { color: #0056b3; font-size: 2em; margin-bottom: 5px; }
        .hero__slogan { color: #555; font-size: 1.1em; margin-bottom: 30px; }
        .offer-banner { background-color: #ffc107; color: #333; padding: 15px; text-align: center; font-weight: bold; border-radius: 5px; margin-bottom: 30px; }
        .btn--cta { background-color: #28a745; color: white; padding: 12px 25px; border: none; border-radius: 5px; cursor: pointer; font-size: 1.1em; font-weight: bold; text-decoration: none; display: inline-block; transition: background-color 0.3s; }
        .btn--cta:hover { background-color: #218838; }
        
        /* Vitrine de Pacotes */
        .vitrine-pacotes { margin-top: 40px; }
        .vitrine-pacotes h2 { text-align: center; color: #0056b3; margin-bottom: 10px; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        .pacotes-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-top: 30px; }
        .pacote-card { background: #fff; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); overflow: hidden; transition: transform 0.3s, box-shadow 0.3s; position: relative; display: flex; flex-direction: column; }
        .pacote-card:hover { transform: translateY(-5px); box-shadow: 0 8px 16px rgba(0,0,0,0.15); }
        .pacote-card--selecionado { border: 4px solid #0056b3; }
        .pacote-card img { width: 100%; height: 200px; object-fit: cover; }
        .pacote-content { padding: 15px; flex-grow: 1; display: flex; flex-direction: column; }
        .pacote-content h3 { color: #333; font-size: 1.2em; margin-top: 0; margin-bottom: 5px; }
        .pacote-content p { font-size: 0.9em; color: #666; margin-bottom: 10px; flex-grow: 1; }
        .card-duracao { font-weight: bold; color: #0056b3; font-size: 0.85em !important; margin-top: 0 !important; }

        /* Consultoria Card */
        .card-consultoria { text-align: center; justify-content: center; align-items: center; padding: 30px; background-color: #f0f8ff; border: 2px dashed #0056b3; }
        .card-consultoria h3 { color: #0056b3; }
        
        /* Price Box */
        .pacote-price-box { border-top: 1px solid #eee; padding-top: 10px; margin-top: 10px; text-align: center; }
        .price-total-cash { font-size: 0.9em; color: #dc3545; text-decoration: line-through; display: block; margin-bottom: 5px; }
        .price-label { font-size: 0.8em; color: #555; display: block; margin-bottom: 3px; font-weight: bold; }
        .price-value { display: flex; justify-content: center; align-items: baseline; margin-bottom: 5px; }
        .installments { font-size: 1.2em; font-weight: bold; color: #28a745; margin-right: 5px; }
        .main-price { font-size: 2.2em; font-weight: 800; color: #28a745; line-height: 1; }
        .taxes { font-size: 0.7em; color: #555; align-self: flex-end; margin-left: 5px; }
        .price-vip-discount { background-color: #333; color: #ffc107; padding: 5px; border-radius: 4px; font-size: 0.8em; font-weight: bold; margin-top: 10px; }

        /* Botão de Seleção */
        .btn-selecionar { width: 100%; padding: 12px; background-color: #0056b3; color: white; border: none; border-radius: 0 0 10px 10px; cursor: pointer; font-size: 1em; font-weight: bold; margin-top: auto; transition: background-color 0.3s; }
        .btn-selecionar:hover { background-color: #004481; }

        /* Formulário */
        .form { background: #fff; padding: 30px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); margin-top: 40px; border: 2px solid transparent; transition: border-color 0.3s; }
        .form.highlighted { border-color: #ffc107; animation: pulse 2s infinite; }
        @keyframes pulse {
            0% { border-color: #ffc107; }
            50% { border-color: #ffa000; }
            100% { border-color: #ffc107; }
        }
        .form__legend { font-size: 1.5em; color: #0056b3; font-weight: bold; margin-bottom: 20px; padding: 0 10px; }
        .form__group { margin-bottom: 20px; }
        .form__group label { display: block; font-weight: bold; margin-bottom: 5px; color: #555; }
        .form__group input[type="text"], 
        .form__group input[type="tel"], 
        .form__group input[type="date"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
            font-size: 1em;
        }
        .selected-pacote-display { background-color: #f0f8ff; font-weight: bold; color: #0056b3 !important; cursor: pointer; border: 1px dashed #0056b3 !important; }
        .selected-pacote-display.is-selected { background-color: #e6ffe6; color: #28a745 !important; border: 1px solid #28a745 !important; }
        
        /* Submit Button */
        .btn-submit { width: 100%; padding: 15px; background-color: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 1.2em; font-weight: bold; margin-top: 10px; transition: background-color 0.3s; }
        .btn-submit:hover:not(:disabled) { background-color: #218838; }
        .btn-submit--disabled, .btn-submit:disabled { background-color: #a9a9a9; cursor: not-allowed; }
        
        .error-message { color: #dc3545; background-color: #f8d7da; padding: 10px; border-radius: 5px; border: 1px solid #f5c6cb; margin-bottom: 20px; }
        .whatsapp-notice { text-align: center; font-size: 0.8em; color: #777; margin-top: 15px; }

        /* MSC Oferta Styling */
        .oferta-container { background-color: #fff; padding: 30px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); margin-bottom: 40px; }
        .oferta-header { background-color: #e50020; color: white; padding: 15px; border-radius: 5px 5px 0 0; font-weight: bold; display: flex; justify-content: space-between; align-items: center; }
        .info-section { padding: 20px 0; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; }
        .super-bingo-tag { display: inline-block; background-color: #ffc107; color: #333; padding: 8px 15px; border-radius: 20px; font-weight: bold; margin: 15px 0; }
        
        .cruzeiro-card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-top: 20px; }
        .cruzeiro-card { background: #f8f8f8; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); overflow: hidden; text-align: center; padding-bottom: 15px; cursor: pointer; transition: border 0.3s; border: 2px solid transparent; }
        .cruzeiro-card:hover { border-color: #0056b3; }
        .cruzeiro-card img { width: 100%; height: 180px; object-fit: cover; margin-bottom: 10px; }
        .navio-nome { font-weight: bold; color: #004481; margin-bottom: 5px; font-size: 1.1em; }
        .detalhes { font-size: 0.8em; color: #666; margin-bottom: 10px; }
        .preco-label { font-size: 0.8em; color: #e50020; font-weight: bold; }
        .preco { font-size: 2em; color: #e50020; font-weight: 800; line-height: 1; margin-bottom: 5px; }
        .parcela { font-size: 0.8em; color: #555; margin-bottom: 15px; }
        .btn-reserva-msc { background-color: #e50020; color: white; padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; transition: background-color 0.3s; margin-top: 10px; }
        .btn-reserva-msc:hover { background-color: #b30018; }
        
        .section-title { color: #0056b3; text-align: center; margin-top: 30px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
        .beneficios-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .beneficio-item-msc { background-color: #f0f8ff; padding: 10px; border-left: 5px solid #0056b3; border-radius: 4px; font-size: 0.9em; }
        .regras-section { margin-top: 30px; background-color: #f8f8f8; padding: 20px; border-radius: 8px; }
        .regras-section h4 { color: #e50020; margin-top: 0; border-bottom: 1px solid #ddd; padding-bottom: 5px; }
        .regra-item { font-size: 0.85em; color: #444; margin-bottom: 8px; }
        .regras-tabela { width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 0.9em; }
        .regras-tabela th, .regras-tabela td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        .regras-tabela th { background-color: #eee; font-weight: bold; }
        .oferta-footer { text-align: center; font-size: 0.8em; color: #777; margin-top: 20px; }
        
        .btn-ver-todas-msc { display: block; text-align: center; padding: 12px; background-color: #0056b3; color: white; border-radius: 5px; margin-top: 25px; font-weight: bold; text-decoration: none; transition: background-color 0.3s; }
        .btn-ver-todas-msc:hover { background-color: #004481; }

        @media (max-width: 768px) {
            .pacotes-grid { grid-template-columns: 1fr; }
            .beneficios-grid { grid-template-columns: 1fr; }
            .cruzeiro-card-grid { grid-template-columns: 1fr; }
            .pacote-content h3 { font-size: 1.1em; }
            .main-price { font-size: 1.8em; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // Endpoints e Constantes
        const WHATSAPP_NUMBER = '5561983163710'; 
        const API_LEAD_URL = '/capturar_lead';
        const TELEFONE_REGEX = /^\d{10,11}$/; 
        
        // Gatilho de Compra / Desconto VIP (Apenas para pacotes normais)
        const PROSPECT_DISCOUNT = '5%'; 
        
        // -----------------------------------------------------
        // --- DADOS DE PACOTES OBTIDOS DO SUPABASE (DINÂMICO) ---
        // -----------------------------------------------------
        
        const getImageUrl = (key) => {
            const IMAGENS = {
                // Caminhos estáticos para as imagens no repositório
                'Lençóis Maranhenses': '/static/Duna-e-agua-dos-lencois-Maranhenses.jpg', 
                'Tailândia': '/static/Festival_Lanternas_Chiang_Mai_Tailandia_Fogos.jpg', 
                'Gramado': '/static/GramadoSuaViagem-GrandeDesfileDeNatal2.webp', 
                'Porto de Galinhas': '/static/dicas-de-porto-de-galinhas.jpg', 
                'Salvador': '/static/tucamorais3.jpg', 
                'Egito': '/static/Customizado.jpg', 
                'Turquia': '/static/Customizado.jpg',
                'Customizado': '/static/Customizado.jpg',
            };
            if (key && key.startsWith('http')) return key; 
            return IMAGENS[key] || IMAGENS['Customizado']; 
        };

        // VARIÁVEL DINÂMICA: O Flask injeta o JSON do Supabase aqui.
        // O `pacotes_json` é a variável JSON serializada passada pelo render_template do Flask.
        const DADOS_ESTATICOS_ATUALIZAVEIS = JSON.parse('{{ pacotes_json | safe }}');
        
        // -----------------------------------------------------

        const DESCRITIVOS_ROTEIROS = {
            "Fortaleza com Praia da Lagoinha": "☀️ Roteiro perfeito para quem ama sol, mar e aventura. Inclui a beleza rústica da Praia da Lagoinha e o agito da capital cearense.",
            "Salvador com Morro de São Paulo": "🏝️ Uma combinação imbatível de cidade histórica e ilha sem carros. Descanse e explore as famosas praias de Morro de São Paulo.",
            "Egito 2X1 | Pacote 08 dias e 07 noites": "🐪 Pacote 2X1: uma jornada pela história milenar, pirâmides e cruzeiro pelo Nilo. Oportunidade única para ir além do comum!",
            "Réveillon na Tailândia com Festival das Lanternas": "🎇 Celebre a virada do ano com o mágico Festival das Lanternas (Yi Peng). Praias paradisíacas e templos milenares esperam por você.",
            "Lençóis Maranhenses | São Luís e Barreirinhas": "💧 Descubra a beleza surreal das lagoas entre dunas. Um ecoturismo inesquecível combinando São Luís e Barreirinhas.",
            "Porto de Galinhas e Maragogi": "🐠 O melhor do Nordeste! Mergulhe nas piscinas naturais e desfrute do famoso 'Caribe Brasileiro'.",
            "Réveillon 2026 - Costão do Santinho Resort": "🎉 Réveillon All Inclusive em um dos resorts mais desejados do Brasil. Garanta sua vaga com as melhores condições.",
            "Grand Turquia Extra Essencial": "🇹🇷 Pacote Essencial pela Turquia, visitando Istambul, Capadócia e Pamukkale. Cultura, história e paisagens inesquecíveis.",
            "Consultoria Personalizada / Outro Destino": "✨ Destino Sob Medida: Você tem em mente um roteiro que não encontrou na lista? Nossa consultoria criará o pacote perfeito para você!",
        };

        const getMinDate = () => {
            const date = new Date();
            date.setDate(date.getDate() + 4); 
            return date.toISOString().split('T')[0];
        };
        
        const obterDescritivoRoteiro = (pacoteNomeCompleto) => {
            if (pacoteNomeCompleto.includes("Consultoria Personalizada")) {
                return DESCRITIVOS_ROTEIROS["Consultoria Personalizada / Outro Destino"];
            }
            const nomeBase = pacoteNomeCompleto.split('|')[0].trim(); 
            if (DESCRITIVOS_ROTEIROS[nomeBase]) {
                return DESCRITIVOS_ROTEIROS[nomeBase];
            }
            return `✈️ Consultoria Exclusiva: Conte-nos seus sonhos para criarmos uma experiência incomum e aplicarmos seu ${PROSPECT_DISCOUNT} de Desconto VIP!`;
        };
        
        // --- COMPONENTE: Card de Pacote Individual (AJUSTADO PARA USAR pacote.parcelas) ---
        const PacoteCard = ({ pacote, onSelect, isSelected }) => {
            // Nota: O pacote do Supabase deve ter as chaves: nome, saida, tipo, desc, imgKey, preco_atual, preco_antigo, noites, moeda, parcelas
            const nomeCompleto = pacote.nome + (pacote.saida ? ` | Saída: ${pacote.saida}` : '');
            
            if (pacote.tipo === 'CONSULTORIA') {
                return (
                    <div className={`pacote-card card-consultoria ${isSelected ? 'pacote-card--selecionado' : ''}`}>
                        <i className="fas fa-magic" style={{ fontSize: '40px', marginBottom: '15px' }}></i>
                        <h3>
                            {pacote.nome} 
                            <span style={{display: 'block', fontSize: '0.6em', fontWeight: 'normal', marginTop: '5px'}}>(Seu Roteiro Único com Assessoria Exclusiva)</span>
                        </h3>
                        <p>{pacote.desc}</p>
                        <button 
                            className="btn-selecionar" 
                            onClick={() => onSelect(pacote.nome)}
                        >
                            <i className="fas fa-tools"></i> Iniciar Planejamento VIP
                        </button>
                    </div>
                );
            }
            
            const precoMaisBaixoParcela = pacote.preco_atual ? Number(pacote.preco_atual) : null;
            const precoTotal = pacote.preco_antigo ? Number(pacote.preco_antigo) : null;
            const moedaSimbolo = pacote.moeda && pacote.moeda === 'USD' ? 'US$' : 'R$' ;
            const noites = pacote.noites || 'Consulte';


            return (
                <div className={`pacote-card ${isSelected ? 'pacote-card--selecionado' : ''}`} style={{position: 'relative'}}>
                    <img 
                        src={getImageUrl(pacote.imagem_url || pacote.imgKey)} 
                        alt={`Imagem de ${pacote.nome}`} 
                        loading="lazy"
                        width="400" 
                        height="200"
                    />
                    <div className="pacote-content">
                        <h3><i className={`fas fa-${pacote.tipo === 'NACIONAL' ? 'plane-departure' : 'globe-americas'}`}></i> {pacote.nome}</h3>
                        <p className="card-duracao"><i className="far fa-calendar-alt"></i> {noites} | Saídas: {pacote.saida || 'Variável'}</p>
                        <p>{pacote.desc}</p>
                        
                        {precoMaisBaixoParcela && precoTotal ? (
                            <div className="pacote-price-box">
                                
                                <span className="price-total-cash">
                                     {moedaSimbolo} {precoTotal.toLocaleString('pt-BR', { minimumFractionDigits: 0 })} à vista *
                                </span>
                                
                                {/* AJUSTE AQUI: Usando pacote.parcelas com fallback para 10 */}
                                <span className="price-label">Parcele em até {pacote.parcelas || 10}x de:</span> 
                                <div className="price-value">
                                    <span className="installments">{moedaSimbolo}</span>
                                    <span className="main-price">{precoMaisBaixoParcela.toLocaleString('pt-BR', { minimumFractionDigits: 0 })}</span>
                                    <span className="taxes">/pessoa + taxas *</span>
                                </div>
                                
                                <div className="price-vip-discount">
                                    <i className="fas fa-certificate"></i> **GANHE {PROSPECT_DISCOUNT} EXTRA (Desconto VIP)**
                                </div>

                                <small style={{display: 'block', fontSize: '0.7em', color: '#777', marginTop: '5px'}}>
                                    *Preço "a partir de" por pessoa em apartamento duplo. Válido para a primeira viagem. Consulte o especialista para opções de datas e voos.
                                </small>
                            </div>
                        ) : (
                            <div style={{textAlign: 'center', marginTop: '15px'}}>
                                <span style={{fontWeight: 'bold', color: '#0056b3'}}>Consulte Disponibilidade e Orçamento VIP</span>
                            </div>
                        )}
                    </div>
                    <button 
                        className="btn-selecionar" 
                        onClick={() => onSelect(nomeCompleto)}
                        disabled={!precoMaisBaixoParcela && pacote.tipo !== 'CONSULTORIA'} 
                    >
                        {precoMaisBaixoParcela ? 'Selecionar Pacote e Falar com Especialista' : 'Solicitar Orçamento Personalizado'}
                    </button>
                </div>
            );
        };
        
        // --- COMPONENTE: Vitrine (Container) (MANTIDO) ---
        const VitrinePacotes = ({ pacotes, onSelect, pacoteSelecionado }) => {
            const consultoria = pacotes.find(p => p.tipo === 'CONSULTORIA');
            
            const pacotesVisiveis = pacotes.filter(p => p.tipo !== 'CONSULTORIA').slice(0, 5); 

            return (
                <div className="vitrine-pacotes">
                    <h2>Melhores Ofertas de Pacotes de Viagem: 5 Destinos Imperdíveis + Consultoria VIP</h2>
                    <p style={{textAlign: 'center', marginBottom: '25px', color: '#555'}}>Clique no seu destino preferido para <strong>ativar seu Desconto VIP</strong> e ser atendido com <strong>prioridade</strong> por um especialista.</p>
                    <div className="pacotes-grid">
                        {pacotesVisiveis.map(pacote => (
                            <PacoteCard 
                                key={pacote.id} 
                                pacote={pacote} 
                                onSelect={onSelect} 
                                isSelected={pacoteSelecionado.includes(pacote.nome)}
                            />
                        ))}
                        {consultoria && (
                            <PacoteCard 
                                pacote={consultoria} 
                                onSelect={onSelect} 
                                isSelected={pacoteSelecionado.includes(consultoria.nome)}
                            />
                        )}
                    </div>
                </div>
            );
        };
        
        
        // --------------------------------------------------------------------------------------
        // --- DADOS ESTATICOS MSC BINGO (MANTIDO) ---
        // --------------------------------------------------------------------------------------
        const CRUZEIROS_OFERTA_MSC = [
            {
                navio: "MSC Preziosa",
                destino: "Brasil (Norte/Nordeste)",
                data: "Dez/2025 - Mar/2026",
                imagem: "/static/PREZIOSA.png", 
                preco: 375,
                parcela: 3750, 
                cabine: "Cabine Interna"
            },
            {
                navio: "MSC Seaview",
                destino: "Argentina e Uruguai",
                data: "Dez/2025 - Fev/2026",
                imagem: "/static/essa aqui seaview.png", 
                preco: 419,
                parcela: 4190,
                cabine: "Cabine Interna"
            },
            {
                navio: "MSC Armonia",
                destino: "Mini Cruzeiros",
                data: "Nov/2025 - Mar/2026",
                imagem: "/static/ARMONIA.png", 
                preco: 259,
                parcela: 2590,
                cabine: "Cabine Interna"
            },
        ];
        
        const CRUZEIROS_BENEFICIOS = [
            "Tarifas 'Super Bingo' com preços muito abaixo do mercado.",
            "Pagamento facilitado em até 12x no cartão de crédito sem juros.",
            "Embarque em Santos ou Itajaí com roteiros no Brasil e na América do Sul.",
            "Serviço FSR: Consultoria e auxílio na documentação de embarque."
        ];
        
        // --------------------------------------------------------------------------------------
        // --- NOVO COMPONENTE: OFERTA MSC BINGO (MANTIDO) ---
        // --------------------------------------------------------------------------------------
        const OfertaMSCBingo = ({ onSelect, onBack, pacoteSelecionado }) => {
            
            const handleCardSelect = (navioNome) => {
                const nomePacote = `Cruzeiro MSC Bingo: ${navioNome}`;
                onSelect(nomePacote);
                
                const form = document.querySelector('.form');
                if (form) {
                    form.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            };
            
            return (
                <div className="oferta-container">
                    <div className="oferta-header">
                        <span><i className="fas fa-ship"></i> OFERTA SUPER BINGO CRUZEIROS</span>
                        <button onClick={onBack} className="btn-voltar-pacotes" style={{ background: 'none', border: 'none', color: '#fff', cursor: 'pointer', fontSize: '0.9em', textDecoration: 'underline' }}>
                            <i className="fas fa-arrow-left"></i> Voltar aos Pacotes Padrão
                        </button>
                    </div>

                    <div className="oferta-body">
                        <div className="info-section" style={{justifyContent: 'center', borderBottom: 'none'}}>
                            <div>
                                <h1 className="hero__headline" style={{ color: '#004481', fontSize: '1.8em', marginBottom: '5px' }}>
                                    <i className="fas fa-ship"></i> SUPER BINGO CRUZEIROS <span style={{color: '#e50020'}}>A PARTIR DE 10X DE R${CRUZEIROS_OFERTA_MSC[0].preco}</span>
                                </h1>
                                <p className="hero__slogan" style={{ fontSize: '1.1em', fontWeight: 600, marginTop: '5px' }}>
                                    Tarifas com Condições Especiais para o Brasil e América do Sul na temporada 2025/2026.
                                </p>
                            </div>
                        </div>

                        <div style={{ textAlign: 'center' }}>
                            <span className="super-bingo-tag">TARIFAS EXCLUSIVAS - VAGAS LIMITADAS!</span>
                        </div>
                        
                        <h2 className="section-title">Nossos Cruzeiros em Destaque</h2>
                        
                        <div className="cruzeiro-card-grid">
                            {CRUZEIROS_OFERTA_MSC.map((cruzeiro, index) => (
                                <div 
                                    key={index} 
                                    className={`cruzeiro-card ${pacoteSelecionado.includes(cruzeiro.navio) ? 'pacote-card--selecionado' : ''}`}
                                    onClick={() => handleCardSelect(cruzeiro.navio)}
                                >
                                    <img src={cruzeiro.imagem} alt={`Cruzeiro ${cruzeiro.navio}`} loading="lazy" width="200" height="150" />
                                    <div className="navio-nome"><i className="fas fa-anchor"></i> {cruzeiro.navio}</div>
                                    <div className="detalhes">{cruzeiro.cabine} | {cruzeiro.data}</div>
                                    <div className="preco-label">A partir de 10x de:</div>
                                    <div className="preco">R$ {cruzeiro.preco}</div>
                                    <div className="parcela">Ou R$ {cruzeiro.parcela} à vista (por pessoa)</div>
                                    <button 
                                        className="btn-reserva-msc"
                                        onClick={() => handleCardSelect(cruzeiro.navio)}
                                    >
                                        Selecionar Pacote e Confirmar Preço
                                    </button>
                                </div>
                            ))}
                        </div>
                        
                        <a href="#form" className="btn-ver-todas-msc" onClick={() => onSelect('Cruzeiro MSC - Consultoria Geral')}>
                            <i className="fas fa-search-plus"></i> VER TODAS AS OPÇÕES E DATAS
                        </a>

                        <h2 className="section-title" style={{marginTop: 30}}>Benefícios da Tarifa Super Bingo FSR</h2>

                        <div className="beneficios-grid">
                            {CRUZEIROS_BENEFICIOS.map((beneficio, index) => (
                                <div key={index} className="beneficio-item-msc">
                                    <i className="fas fa-check-circle" style={{marginRight: 10, color: '#004481'}}></i>
                                    {beneficio}
                                </div>
                            ))}
                        </div>

                        <div className="regras-section">
                            <h4>REGRAS E INFORMAÇÕES IMPORTANTES (TARIFA BINGO)</h4>
                            <div className="regra-item">O navio e as datas de embarque/desembarque são definidos pela operadora no momento da reserva e podem variar.</div>
                            <div className="regra-item">A cabine é garantida, mas a localização (piso, proa/popa) será informada no check-in.</div>
                            <div className="regra-item">A tarifa não permite seleção de cabine, mas garante o preço mais baixo da temporada.</div>
                            <div className="regra-item">Preços são "a partir de" por pessoa em cabine dupla interna, excluindo taxas portuárias e de serviço.</div>
                            
                             <table className="regras-tabela">
                                <thead>
                                    <tr>
                                        <th>Modalidade</th>
                                        <th>Benefício</th>
                                        <th>Seleção de Cabine</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>**Super Bingo**</td>
                                        <td>Preço promocional mais baixo.</td>
                                        <td>Não permite (cabine garantida)</td>
                                    </tr>
                                    <tr>
                                        <td>Tarifa Padrão</td>
                                        <td>Preço normal de tabela.</td>
                                        <td>Permite seleção prévia</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div className="oferta-footer">
                            *Preços em reais (R$) por pessoa, em cabine dupla interna, sujeitos a alteração e confirmação de disponibilidade da operadora no ato da reserva. Não incluem taxas.
                        </div>

                    </div>
                </div>
            );
        }
        
        // --------------------------------------------------------------------------------------
        // --- COMPONENTE PRINCIPAL: App (MANTIDO) ---
        // --------------------------------------------------------------------------------------
        const App = () => {
            const [nome, setNome] = React.useState('');
            const [telefone, setTelefone] = React.useState('');
            const [dataViagem, setDataViagem] = React.useState('');
            const [pacoteSelecionado, setPacoteSelecionado] = React.useState('');
            const [erro, setErro] = React.useState('');
            const [isSubmitting, setIsSubmitting] = React.useState(false);
            const [isFormHighlighted, setIsFormHighlighted] = React.useState(false);
            const [showMscOffer, setShowMscOffer] = React.useState(false);

            const isFormValid = nome.length > 2 && TELEFONE_REGEX.test(telefone) && dataViagem && pacoteSelecionado;

            const handlePacoteSelect = (pacoteNome) => {
                setPacoteSelecionado(pacoteNome);
                setErro('');
                
                setIsFormHighlighted(true);
                setTimeout(() => setIsFormHighlighted(false), 2000); 

                const form = document.querySelector('.form');
                if (form) {
                    form.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            };

            const handleSubmit = async (e) => {
                e.preventDefault();
                setErro('');
                
                if (!isFormValid) {
                    setErro('Por favor, preencha todos os campos obrigatórios e verifique seu telefone.');
                    return;
                }
                
                setIsSubmitting(true);

                const isMsc = pacoteSelecionado.includes("Cruzeiro MSC");
                const appliedDiscount = isMsc ? 'N/A (Super Bingo)' : `${PROSPECT_DISCOUNT} VIP`;
                
                const data = {
                    nome,
                    telefone,
                    data_viagem: dataViagem,
                    pacote: pacoteSelecionado,
                    origem: window.location.href,
                    desconto_aplicado: appliedDiscount
                };
                
                let whatsappMessageText;
                if (isMsc) {
                     whatsappMessageText = `Olá, sou ${nome} e acabei de selecionar o pacote *${pacoteSelecionado}*. Gostaria de mais informações sobre as datas disponíveis. Minha data preferida para viajar é ${new Date(dataViagem).toLocaleDateString('pt-BR')}.`;
                } else {
                     whatsappMessageText = `Olá, sou ${nome} e acabei de solicitar um orçamento para o pacote: *${pacoteSelecionado}*. Gostaria de mais informações sobre as datas e como aplicar meu Desconto VIP de ${PROSPECT_DISCOUNT}. Minha data preferida para viajar é ${new Date(dataViagem).toLocaleDateString('pt-BR')}.`;
                }
                
                const whatsappMessage = encodeURIComponent(whatsappMessageText);


                try {
                    const response = await fetch(API_LEAD_URL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(data),
                    });

                    if (!response.ok) {
                        throw new Error(`Erro ao enviar dados: ${response.statusText}`);
                    }

                    window.location.href = `https://wa.me/${WHATSAPP_NUMBER}?text=${whatsappMessage}`;

                } catch (error) {
                    console.error('Erro no envio:', error);
                    setErro('Ocorreu um erro ao enviar sua solicitação. Por favor, tente novamente.');
                    setIsSubmitting(false); 
                }
            };
            
            const renderContent = () => {
                if (showMscOffer) {
                    return (
                        <OfertaMSCBingo 
                            onSelect={handlePacoteSelect} 
                            onBack={() => setShowMscOffer(false)}
                            pacoteSelecionado={pacoteSelecionado}
                        />
                    );
                }
                
                return (
                    <>
                        <div className="offer-banner">
                            <i className="fas fa-star"></i> ATIVE AGORA SEU DESCONTO VIP DE {PROSPECT_DISCOUNT} PARA COMPRAS À VISTA OU PACOTES INÉDITOS!
                        </div>
                        
                        <button 
                            onClick={() => setShowMscOffer(true)} 
                            className="btn--cta" 
                            style={{ backgroundColor: '#004481', marginBottom: '40px' }}
                        >
                            <i className="fas fa-ship"></i> Ver Oferta Exclusiva: CRUZEIROS SUPER BINGO
                        </button>

                        <VitrinePacotes 
                            pacotes={DADOS_ESTATICOS_ATUALIZAVEIS} 
                            onSelect={handlePacoteSelect} 
                            pacoteSelecionado={pacoteSelecionado}
                        />
                    </>
                );
            };

            return (
                <div className="container form-container">
                    <div className="header__content">
                        <img 
                            src="/static/logo_fsr0.webp" 
                            alt="FSR Viagens | Consultoria de Viagens Especializada" 
                            className="logo__image"
                            width="200" 
                            height="80"
                            key={showMscOffer ? 'logo-msc' : 'logo-padrao'} 
                        />
                        <h1 className="hero__headline">
                            Pacotes de Viagem 2025/2026: Seu Destino Inesquecível Começa Aqui!
                        </h1>
                        <p className="hero__slogan">
                            {pacoteSelecionado 
                                ? obterDescritivoRoteiro(pacoteSelecionado)
                                : 'Sua consultoria de viagens especializada. Encontre roteiros exclusivos com as melhores condições do mercado.'
                            }
                        </p>
                    </div>

                    {renderContent()}

                    <form className={`form ${isFormHighlighted ? 'highlighted' : ''}`} onSubmit={handleSubmit} id="form">
                        <fieldset className="form__fieldset">
                            <legend className="form__legend"><i className="fas fa-user-check"></i> 1. Confirme Seus Dados VIP</legend>
                            
                            <div className="form__group">
                                <label htmlFor="pacote">Pacote Selecionado</label>
                                <input 
                                    type="text" 
                                    id="pacote" 
                                    className={`selected-pacote-display ${pacoteSelecionado ? 'is-selected' : ''}`}
                                    value={pacoteSelecionado || (showMscOffer ? 'Clique em um cruzeiro acima para confirmar a tarifa' : 'Clique em um pacote acima para ativar o desconto')} 
                                    readOnly 
                                    required 
                                    onClick={() => document.querySelector('.vitrine-pacotes')?.scrollIntoView({ behavior: 'smooth' })}
                                />
                            </div>
                            
                            <div className="form__group">
                                <label htmlFor="nome"><i className="fas fa-id-card"></i> Seu Nome Completo</label>
                                <input 
                                    type="text" 
                                    id="nome" 
                                    value={nome} 
                                    onChange={(e) => setNome(e.target.value)} 
                                    required 
                                    placeholder="Ex: João da Silva"
                                />
                            </div>
                            
                            <div className="form__group">
                                <label htmlFor="telefone"><i className="fab fa-whatsapp"></i> Telefone (WhatsApp com DDD) *</label>
                                <input 
                                    type="tel" 
                                    id="telefone" 
                                    value={telefone} 
                                    onChange={(e) => setTelefone(e.target.value)} 
                                    required 
                                    placeholder="Ex: 61988887777"
                                    pattern="\d{10,11}" 
                                />
                            </div>

                            <div className="form__group">
                                <label htmlFor="dataViagem"><i className="far fa-calendar-alt"></i> Data Preferencial para Viajar</label>
                                <input 
                                    type="date" 
                                    id="dataViagem" 
                                    value={dataViagem} 
                                    onChange={(e) => setDataViagem(e.target.value)} 
                                    min={getMinDate()}
                                    required 
                                />
                            </div>
                            
                            {erro && <p className="error-message"><i className="fas fa-exclamation-triangle"></i> {erro}</p>}
                            
                            <button 
                                type="submit" 
                                className={`btn-submit ${!isFormValid ? 'btn-submit--disabled' : ''}`} 
                                disabled={!isFormValid || isSubmitting}
                            >
                                <i className="fab fa-whatsapp"></i> 
                                {isSubmitting ? 'Enviando, aguarde...' : `RECEBER ORÇAMENTO E ATIVAR ${PROSPECT_DISCOUNT} VIP`}
                            </button>
                            
                            <p className="whatsapp-notice">
                                <i className="fas fa-lock"></i> Seus dados serão enviados de forma segura para nossa consultoria via WhatsApp.
                            </p>

                        </fieldset>
                    </form>
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script> 
</body>
</html>